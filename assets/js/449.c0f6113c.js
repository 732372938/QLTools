"use strict";(self["webpackChunkqltools"]=self["webpackChunkqltools"]||[]).push([[449],{3798:function(e,t,n){n.d(t,{Z:function(){return I}});var a=n(6252);const i=e=>((0,a.dD)("data-v-326b083d"),e=e(),(0,a.Cn)(),e),d={class:"mdui-m-t-5",id:"footer"},l={class:"mdui-p-a-5 mdui-typo mdui-container"},o={class:"mdui-col mdui-text"},c=i((()=>(0,a._)("span",{id:"Copyright"},"Copyright © 2022 All rights reserved. ",-1))),r={href:"https://github.com/nuanxinqing123/QLTools"},s=(0,a.Uk)("青龙 Tools"),m=i((()=>(0,a._)("p",null,"简单便捷的第三方工具，给您带来不一样的体验！",-1)));function g(e,t,n,i,g,u){const v=(0,a.up)("st");return(0,a.wg)(),(0,a.iD)("footer",d,[(0,a._)("div",l,[(0,a._)("div",o,[(0,a._)("p",null,[c,(0,a._)("a",r,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[s])),_:1})])]),m])])])}var u={name:"FooterCom"},v=n(3744);const p=(0,v.Z)(u,[["render",g],["__scopeId","data-v-326b083d"]]);var I=p},2555:function(e,t,n){n.d(t,{Z:function(){return K}});var a=n(6252),i=n(3577),d=n(9963);const l={class:"mdui-toolbar"},o=(0,a._)("i",{class:"mdui-icon material-icons"},"account_balance_wallet",-1),c={class:"mdui-typo-title"},r=(0,a._)("div",{class:"mdui-toolbar-spacer"},null,-1),s=(0,a._)("i",{class:"mdui-icon material-icons"},"credit_card",-1),m=[s],g=(0,a._)("a",{"mdui-tooltip":"{content: '刷新页面'}",href:"javascript:location.reload();",class:"mdui-btn mdui-btn-icon mdui-ripple"},[(0,a._)("i",{class:"mdui-icon material-icons"},"refresh")],-1),u=(0,a._)("i",{class:"mdui-icon material-icons"},"account_circle",-1),v=[u],p=(0,a._)("i",{class:"mdui-icon material-icons"},"exit_to_app",-1),I=[p],h={id:"cdkAdd",class:"mdui-dialog",style:{top:"210px",display:"none"}},E={class:"mdui-dialog-content mdui-typo",style:{height:"407px"}},y={class:"mdui-textfield"},_=(0,a._)("label",{class:"mdui-textfield-label"},"CD-KEY密钥",-1),x={class:"mdui-dialog-actions"},D=(0,a._)("i",{class:"mdui-icon mdui-icon-left material-icons"},"check",-1);function b(e,t,n,s,u,p){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",l,[o,(0,a._)("span",c,(0,i.zw)(u.webTitle),1),r,(0,a._)("a",{"mdui-tooltip":"{content: '密钥添加/更新'}",onClick:t[0]||(t[0]=e=>p.OpenCDKInput()),class:"mdui-btn mdui-btn-icon"},m),g,(0,a._)("a",{"mdui-tooltip":"{content: '管理面板'}",onClick:t[1]||(t[1]=e=>this.GoAdmin()),id:"Admin",class:"mdui-btn mdui-btn-icon mdui-ripple",style:{display:"none"}},v),(0,a._)("a",{"mdui-tooltip":"{content: '退出登录'}",onClick:t[2]||(t[2]=e=>this.LogOut()),id:"LogOut",class:"mdui-btn mdui-btn-icon mdui-ripple",style:{display:"none"}},I)]),(0,a._)("div",h,[(0,a._)("div",E,[(0,a._)("form",{onSubmit:t[5]||(t[5]=(0,d.iM)((()=>{}),["prevent"]))},[(0,a._)("div",y,[_,(0,a.wy)((0,a._)("input",{class:"mdui-textfield-input",type:"text",placeholder:"请输入您的CD-KEY密钥","onUpdate:modelValue":t[3]||(t[3]=e=>u.CD_KEY=e)},null,512),[[d.nr,u.CD_KEY]])]),(0,a._)("div",x,[(0,a._)("button",{onClick:t[4]||(t[4]=e=>p.InsertCDK()),class:"mdui-ripple mdui-btn mdui-color-green-700 mdui-text-color-white btn"},[D,(0,a.Uk)((0,i.zw)(this.CDK_Btn),1)])])],32)])])],64)}var k=n(9669),T=n.n(k),B=n(4493),C={name:"HeaderCom",data(){return{webTitle:"",CDK_Btn:"确认密钥",CD_KEY:""}},methods:{GetWebTitle(){T().get("/v1/api/set/setting?key=webTitle").then((e=>{""===e.data.data["value"]?this.webTitle="青龙Tools":this.webTitle=e.data.data["value"]}))},CheckLogin(){this.CD_KEY=localStorage.getItem("cdk");let e=localStorage.getItem("Bearer");if(null!==e&&""!==e){let t={token:e};T().post("/v1/api/check/token",t).then((e=>{!0===e.data.data?(document.getElementById("Admin").style.display="inline",document.getElementById("LogOut").style.display="inline"):localStorage.clear()}))}},LogOut(){console.log("退出登录"),localStorage.clear(),window.open("/#/","_self"),location.reload()},GoAdmin(){window.open("/#/admin","_self"),location.reload()},OpenCDKInput(){let e=new B.Z.Dialog("#cdkAdd");e.toggle()},ChangeBtn(){let e=localStorage.getItem("cdk");null!==e&&""!==e&&(this.CDK_Btn="更新密钥")},InsertCDK(){localStorage.setItem("cdk",this.CD_KEY),window.open("/","_self")}},mounted(){this.CheckLogin(),this.GetWebTitle(),this.ChangeBtn()}},w=n(3744);const f=(0,w.Z)(C,[["render",b]]);var K=f},5449:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var a=n(6252);function i(e,t,n,i,d,l){const o=(0,a.up)("HeaderCom"),c=(0,a.up)("NoticeCom"),r=(0,a.up)("FooterCom");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(o)]),(0,a._)("div",null,[(0,a.Wm)(c)]),(0,a._)("div",null,[(0,a.Wm)(r)])],64)}var d=n(3577),l=n(9963);const o=e=>((0,a.dD)("data-v-f1e29b34"),e=e(),(0,a.Cn)(),e),c={id:"BodyCon"},r=o((()=>(0,a._)("div",{class:"box",id:"box_notice"},[(0,a._)("div",null,[(0,a._)("p",{style:{"padding-bottom":"10px"}},"网站公告"),(0,a._)("hr"),(0,a._)("div",{class:"notice_data",id:"notice_data"},[(0,a._)("strong",null,[(0,a._)("span",{style:{color:"#E53333","text-align":"center"}},"本工具仅用于学习和调试使用，禁止用于任何违法犯罪行为")]),(0,a._)("br")])])],-1))),s={class:"box",style:{"margin-top":"35px"}},m={style:{"padding-bottom":"10px"}},g=o((()=>(0,a._)("hr",null,null,-1))),u={id:"envSelect"},v={style:{width:"100%"}},p={style:{"margin-top":"8px"}},I=(0,a.Uk)(" 服务器： "),h=["value"],E={style:{"margin-top":"8px"}},y=(0,a.Uk)(" 变量组： "),_=["value","selected"],x={key:0},D={key:1},b=o((()=>(0,a._)("div",{style:{"margin-top":"8px","font-size":"16px"}},[(0,a.Uk)(" 剩余位置："),(0,a._)("span",{id:"num"},"0")],-1))),k={class:"envInput"},T={class:"mdui-textfield"},B={class:"mdui-textfield"},C=o((()=>(0,a._)("div",{style:{"text-align":"center","padding-top":"20px"}},[(0,a._)("button",{class:"mdui-ripple mdui-btn mdui-btn-raised mdui-ripple mdui-color-blue-50",style:{width:"200px"},id:"LoginBtn"},"提  交")],-1))),w=o((()=>(0,a._)("div",{id:"SendOK",class:"mdui-dialog",style:{display:"none"}},[(0,a._)("div",{class:"mdui-dialog-title",id:"dialog-title"},"Success"),(0,a._)("div",{class:"mdui-dialog-content",id:"dialog-content"},"您已提交成功"),(0,a._)("div",{class:"mdui-dialog-actions"},[(0,a._)("button",{class:"mdui-ripple mdui-btn mdui-ripple","mdui-dialog-close":""},"确认")])],-1)));function f(e,t,n,i,o,f){return(0,a.wg)(),(0,a.iD)("div",c,[r,(0,a._)("div",s,[(0,a._)("div",null,[(0,a._)("p",m,"变量提交    "+(0,d.zw)(this.CDK_INFO),1),g,(0,a._)("div",u,[(0,a._)("div",v,[(0,a._)("div",p,[I,(0,a._)("select",{class:"mdui-select",onChange:t[0]||(t[0]=e=>f.changeEnvData(e)),id:"server"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.InitIndexData["serverData"],(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e["PanelName"]},(0,d.zw)(e["PanelName"]),9,h)))),128))],32)]),(0,a._)("div",E,[y,(0,a._)("select",{class:"mdui-select",onChange:t[1]||(t[1]=e=>f.changeNum(e)),id:"env"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.EnvData,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e["name"],selected:e.selected},[""!==e["nameRemarks"]?((0,a.wg)(),(0,a.iD)("span",x,(0,d.zw)(e["nameRemarks"]),1)):((0,a.wg)(),(0,a.iD)("span",D,(0,d.zw)(e["name"]),1))],8,_)))),128))],32)]),b])]),(0,a._)("div",k,[(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,l.iM)(((...e)=>f.POSTEnvAdd&&f.POSTEnvAdd(...e)),["prevent"]))},[(0,a._)("div",T,[(0,a.wy)((0,a._)("input",{type:"text",class:"mdui-textfield-input",placeholder:"变量值","onUpdate:modelValue":t[2]||(t[2]=e=>o.EnvAdd.envData=e)},null,512),[[l.nr,o.EnvAdd.envData]])]),(0,a._)("div",B,[(0,a.wy)((0,a._)("input",{type:"text",class:"mdui-textfield-input",placeholder:"备注（可空）","onUpdate:modelValue":t[3]||(t[3]=e=>o.EnvAdd.envRemarks=e)},null,512),[[l.nr,o.EnvAdd.envRemarks]])]),C],32)])])]),w])}var K=n(9669),S=n.n(K),A=n(4493),N={name:"NoticeCom",data(){return{InitIndexData:[],EnvData:[{selected:!1}],EnvAdd:{serverID:0,envName:"",envData:"",envRemarks:"",envCDK:""},CDK_INFO:""}},methods:{GetIndexData(){S().get("/v1/api/index/data").then((e=>{this.InitIndexData=e.data.data;let t=localStorage.getItem("Bearer");if(null!==t&&""!==t)for(let n=0;n<this.InitIndexData["serverData"].length;n++)null===this.InitIndexData["serverData"][n]["envData"]&&A.Z.snackbar({message:"【管理员可见】面板存在未绑定变量，请在面板管理中绑定变量",position:"right-top"});this.EnvData=this.InitIndexData["serverData"][0]["envData"],this.EnvAdd.serverID=this.InitIndexData["serverData"][0]["ID"],null!==this.InitIndexData["serverData"][0]["envData"]&&(this.EnvAdd.envName=this.InitIndexData["serverData"][0]["envData"][0]["name"],this.EnvData[0].selected=!0,document.getElementById("num").innerText=this.InitIndexData["serverData"][0]["envData"][0]["quantity"])}))},GetNotice(){S().get("/v1/api/set/setting?key=notice").then((e=>{document.getElementById("notice_data").innerHTML=e.data.data["value"]}))},changeEnvData(e){let t=e.target.selectedIndex;this.EnvData=this.InitIndexData["serverData"][t]["envData"],this.EnvAdd.serverID=this.InitIndexData["serverData"][t]["ID"],this.EnvAdd.envName=this.InitIndexData["serverData"][t]["envData"][0]["name"],this.EnvData[0].selected=!0,document.getElementById("num").innerText=this.InitIndexData["serverData"][t]["envData"][0]["quantity"]},changeNum(e){let t=e.target.selectedIndex;document.getElementById("num").innerText=this.EnvData[t]["quantity"],this.EnvAdd.envName=this.EnvData[t]["name"]},POSTEnvAdd(){let e=new A.Z.Dialog("#SendOK");this.EnvAdd.envCDK=localStorage.getItem("cdk"),-100===this.EnvAdd.serverID?(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="此服务器已失去连接（禁止提交），请更换至其他服务器",e.toggle()):S().post("/v1/api/env/add",this.EnvAdd).then((t=>{let n=localStorage.getItem("Bearer");switch(""!==t.data){case 2e3===t.data.code:document.getElementById("dialog-title").innerText="Success",document.getElementById("dialog-content").innerText="您已提交成功",e.toggle(),setTimeout((()=>{location.reload()}),1500);break;case 5020===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="限额已满，禁止提交",e.toggle();break;case 5019===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="上传内容不符合规定, 请检查后再提交",e.toggle();break;case 5015===t.data.code:null!==n&&""!==n?(document.getElementById("dialog-title").innerText="【管理员可见】Error",document.getElementById("dialog-content").innerText="提交服务器或变量名不在白名单, 请尝试在后台点击清空变量绑定按钮后重新绑定解决",e.toggle()):(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="提交服务器或变量名不在白名单",e.toggle());break;case 5016===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText=t.data.msg,e.toggle();break;case 5024===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="禁止提交重复数据",e.toggle();break;case 5025===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="该变量已被管理员禁止提交",e.toggle();break;case 5026===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="今日提交已到达上限",e.toggle();break;case 5028===t.data.code:null!==n&&""!==n?(document.getElementById("dialog-title").innerText="【管理员可见】Error",document.getElementById("dialog-content").innerText="当前变量绑定的JS插件执行发生错误发生错误，请查看日志解决错误（日志路径：logs目录下面）",e.toggle()):(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText=t.data.msg,e.toggle());break;case 5029===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="提交数据已被管理员拒绝，原因："+t.data.msg,e.toggle();break;case 5003===t.data.code:null!==n&&""!==n?(document.getElementById("dialog-title").innerText="【管理员可见】Error",document.getElementById("dialog-content").innerText="程序内部发生错误，请查看日志解决错误（日志路径：logs目录下面）",e.toggle()):(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="服务繁忙,请稍后重试",e.toggle());break;case 5032===t.data.code:document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText=t.data.msg,e.toggle();break;case 5002===t.data.code:""===t.data.data?(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="服务繁忙,请稍后重试",e.toggle()):(document.getElementById("dialog-title").innerText="Error",document.getElementById("dialog-content").innerText="提交内容不完整，请检查后提交",e.toggle());break}})).catch((e=>{A.Z.snackbar({message:e,position:"right-top"})}))},changeStyle(){let e=document.querySelector("#BodyCon");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px",A.Z.mutation()},changeCDKInfo(){let e=localStorage.getItem("cdk");null!==e&&""!==e&&S().post("/v1/api/check/cdk",{cdk:e}).then((e=>{switch(""!==e.data){case 2e3===e.data.code:this.CDK_INFO=e.data.data}}))}},mounted(){this.GetIndexData(),this.GetNotice(),this.changeStyle(),this.changeCDKInfo()}},O=n(3744);const Z=(0,O.Z)(N,[["render",f],["__scopeId","data-v-f1e29b34"]]);var H=Z,Y=n(2555),L=n(3798),G={name:"IndexView",components:{HeaderCom:Y.Z,NoticeCom:H,FooterCom:L.Z}};const U=(0,O.Z)(G,[["render",i]]);var q=U}}]);
//# sourceMappingURL=449.c0f6113c.js.map