(self["webpackChunkqltools"]=self["webpackChunkqltools"]||[]).push([[388],{5823:function(i){i.exports=function(i,t,a,e){var s="undefined"!==typeof e?[e,i]:[i],n=new Blob(s,{type:a||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,t);else{var d=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=d,o.setAttribute("download",t),"undefined"===typeof o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(d)}),200)}}},6324:function(i,t,a){"use strict";a.d(t,{Z:function(){return F}});var e=a(6252);const s=i=>((0,e.dD)("data-v-54e25290"),i=i(),(0,e.Cn)(),i),n={class:"mdui-drawer mdui-shadow-6",id:"main-drawer",style:{"box-sizing":"border-box"}},d={class:"mdui-list"},o=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"desktop_mac",-1))),l=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"仪表盘",-1))),r=[o,l],c=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"playlist_play",-1))),m=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"变量管理",-1))),u=[c,m],p=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"apps",-1))),g=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"面板管理",-1))),v=[p,g],h=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"local_play",-1))),_=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"插件管理",-1))),b=[h,_],k=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"import_export",-1))),w=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"容器管理",-1))),f=[k,w],y=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"sms",-1))),x=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"推送管理",-1))),D=[y,x],I=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"settings",-1))),S=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"网站设置",-1))),U=[I,S],Z=s((()=>(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"attach_money",-1))),A=s((()=>(0,e._)("div",{class:"mdui-list-item-content"},"关于面板",-1))),O=[Z,A],C=s((()=>(0,e._)("a",{class:"mdui-list-item","mdui-drawer-close":""},[(0,e._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"chevron_left"),(0,e._)("div",{class:"mdui-list-item-content"},"收起菜单")],-1)));function R(i,t,a,s,o,l){return(0,e.wg)(),(0,e.iD)("div",n,[(0,e._)("div",d,[(0,e._)("a",{onClick:t[0]||(t[0]=i=>this.OpenURL("/#/admin/")),class:"mdui-list-item"},r),(0,e._)("a",{onClick:t[1]||(t[1]=i=>this.OpenURL("/#/admin/env/")),class:"mdui-list-item"},u),(0,e._)("a",{onClick:t[2]||(t[2]=i=>this.OpenURL("/#/admin/panel/")),class:"mdui-list-item"},v),(0,e._)("a",{onClick:t[3]||(t[3]=i=>this.OpenURL("/#/admin/plugin/")),class:"mdui-list-item"},b),(0,e._)("a",{onClick:t[4]||(t[4]=i=>this.OpenURL("/#/admin/transfer/")),class:"mdui-list-item"},f),(0,e._)("a",{onClick:t[5]||(t[5]=i=>this.OpenURL("/#/admin/message/")),class:"mdui-list-item"},D),(0,e._)("a",{onClick:t[6]||(t[6]=i=>this.OpenURL("/#/admin/settings/")),class:"mdui-list-item"},U),(0,e._)("a",{onClick:t[7]||(t[7]=i=>this.OpenURL("/#/admin/about/")),class:"mdui-list-item"},O),C])])}var L=a(4493),B={name:"AdminBar",methods:{changeStyle(){window.innerWidth>=1e3&&document.getElementById("main-drawer").classList.add("mdui-drawer-open");let i=document.querySelector("#container");i.style.minHeight=window.innerHeight-document.body.clientHeight+i.clientHeight+"px",L.Z.mutation()},OpenURL(i){window.open(i,"_self"),location.reload()}},mounted(){this.changeStyle()}},T=a(3744);const P=(0,T.Z)(B,[["render",R],["__scopeId","data-v-54e25290"]]);var F=P},950:function(i,t,a){"use strict";a.d(t,{Z:function(){return C}});var e=a(6252);const s=i=>((0,e.dD)("data-v-051e9a76"),i=i(),(0,e.Cn)(),i),n={class:"mdui-m-t-5"},d={class:"mdui-p-a-5 mdui-typo mdui-container"},o={class:"mdui-row-sm-3"},l={class:"mdui-col mdui-text"},r=s((()=>(0,e._)("span",{id:"Copyright"},"Copyright © 2022 All rights reserved. ",-1))),c={href:"https://github.com/nuanxinqing123/QLTools"},m=(0,e.Uk)("青龙 Tools"),u=s((()=>(0,e._)("p",null,"简单便捷的第三方工具，给您带来不一样的体验！",-1))),p={class:"mdui-col mdui-text"},g=(0,e.Uk)("QQ交流: "),v={href:"https://jq.qq.com/?_wv=1027&k=BV2RgQaP"},h=(0,e.Uk)("进来吹水"),_=(0,e.Uk)("电报联系: "),b={href:"https://t.me/Nuanxinqing"},k=(0,e.Uk)("@Nuanxinqing"),w={class:"mdui-col mdui-text"},f=(0,e.Uk)("电报频道: "),y={href:"https://t.me/qltool"},x=(0,e.Uk)("青龙Tools"),D=(0,e.Uk)("电报群组: "),I={href:"https://t.me/qltools"},S=(0,e.Uk)("青龙Tools吹水群");function U(i,t,a,s,U,Z){const A=(0,e.up)("st");return(0,e.wg)(),(0,e.iD)("footer",n,[(0,e._)("div",d,[(0,e._)("div",o,[(0,e._)("div",l,[(0,e._)("p",null,[r,(0,e._)("a",c,[(0,e.Wm)(A,null,{default:(0,e.w5)((()=>[m])),_:1})])]),u]),(0,e._)("div",p,[(0,e._)("p",null,[g,(0,e._)("a",v,[(0,e.Wm)(A,null,{default:(0,e.w5)((()=>[h])),_:1})])]),(0,e._)("p",null,[_,(0,e._)("a",b,[(0,e.Wm)(A,null,{default:(0,e.w5)((()=>[k])),_:1})])])]),(0,e._)("div",w,[(0,e._)("p",null,[f,(0,e._)("a",y,[(0,e.Wm)(A,null,{default:(0,e.w5)((()=>[x])),_:1})])]),(0,e._)("p",null,[D,(0,e._)("a",I,[(0,e.Wm)(A,null,{default:(0,e.w5)((()=>[S])),_:1})])])])])])])}var Z={name:"AdminFooter"},A=a(3744);const O=(0,A.Z)(Z,[["render",U],["__scopeId","data-v-051e9a76"]]);var C=O},2743:function(i,t,a){"use strict";a.d(t,{Z:function(){return b}});var e=a(6252);const s={class:"mdui-appbar mdui-appbar-fixed mdui-color-indigo-800"},n={class:"mdui-toolbar"},d=(0,e._)("a",{"mdui-tooltip":"{content: '菜单'}","mdui-drawer":"{target: '#main-drawer'}",class:"mdui-btn mdui-btn-icon"},[(0,e._)("i",{class:"mdui-icon material-icons"},"menu")],-1),o=(0,e._)("a",{href:"javascript:;",class:"mdui-typo-headline"},"Tools",-1),l=(0,e._)("div",{class:"mdui-toolbar-spacer"},null,-1),r=(0,e._)("i",{class:"mdui-icon material-icons"},"home",-1),c=[r],m=(0,e._)("a",{"mdui-tooltip":"{content: '刷新页面'}",href:"javascript:location.reload();",class:"mdui-btn mdui-btn-icon"},[(0,e._)("i",{class:"mdui-icon material-icons"},"refresh")],-1),u=(0,e._)("i",{class:"mdui-icon material-icons"},"exit_to_app",-1),p=[u];function g(i,t,a,r,u,g){return(0,e.wg)(),(0,e.iD)("header",s,[(0,e._)("div",n,[d,o,l,(0,e._)("a",{"mdui-tooltip":"{content: '前往首页'}",onClick:t[0]||(t[0]=(...i)=>g.GoIndex&&g.GoIndex(...i)),class:"mdui-btn mdui-btn-icon"},c),m,(0,e._)("a",{"mdui-tooltip":"{content: '退出登录'}",onClick:t[1]||(t[1]=i=>this.LogOut()),href:"javascript:;",class:"mdui-btn mdui-btn-icon",id:"LogOut"},p)])])}var v={name:"AdminHeader",methods:{LogOut(){console.log("退出登录"),localStorage.clear(),window.open("/#/","_self"),location.reload()},GoIndex(){window.open("/#/","_self"),location.reload()}}},h=a(3744);const _=(0,h.Z)(v,[["render",g]]);var b=_},2388:function(i,t,a){"use strict";a.r(t),a.d(t,{default:function(){return oi}});var e=a(6252);const s={class:"mdui-appbar-with-toolbar"};function n(i,t,a,n,d,o){const l=(0,e.up)("AdminHeader"),r=(0,e.up)("AdminBar"),c=(0,e.up)("AdminTransferCom"),m=(0,e.up)("AdminFooter");return(0,e.wg)(),(0,e.iD)("div",s,[(0,e.Wm)(l),(0,e.Wm)(r),(0,e.Wm)(c),(0,e.Wm)(m)])}var d=a(2743),o=a(6324),l=a(950),r=a(3577);const c={id:"container",class:"mdui-container mdui-p-t-1",style:{"margin-top":"10px"}},m=(0,e.uE)('<div class="mdui-card mt" style="border-radius:15px;"><div class="mdui-card-primary"><div class="mdui-card-primary-title">容器管理</div><div class="mdui-card-primary-subtitle">Container Management</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">容器管理是方便管理员对于不同容器之间变量的管理操作</p></div></div>',1),u={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},p=(0,e.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">迁移/复制</div><div class="mdui-card-primary-subtitle">Transfer Copy</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 迁移/复制功能需要至少添加两个面板地址才能正常使用</p><p class="text_s">迁移: 将A面板的所有变量迁移到B面板, 迁移完成后会清空A面板变量 <span style="color:red;">【迁移功能可能受到青龙的限流限制,强烈推荐使用备份功能先备份数据。然后再使用迁移功能（避免数据丢失）】</span></p><p class="text_s">复制: 将A面板的所有变量复制到B面板, 复制完成后A面板变量不会变化</p></div><div class="mdui-divider"></div>',3),g={style:{"text-align":"center","margin-top":"15px"}},v={style:{"margin-left":"20px","margin-right":"20px"}},h=(0,e.Uk)(" A面板： "),_=(0,e._)("option",null,"请选择面板",-1),b=["value"],k={style:{"margin-left":"20px","margin-right":"20px"}},w=(0,e.Uk)(" B面板： "),f=(0,e._)("option",null,"请选择面板",-1),y=["value"],x={style:{"margin-left":"20px","margin-right":"20px"}},D=(0,e.Uk)(" 操作： "),I=(0,e._)("option",null,"复制",-1),S=(0,e._)("option",null,"迁移",-1),U=[I,S],Z={class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},A={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},O=(0,e.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">备份/恢复</div><div class="mdui-card-primary-subtitle">Backup Restore</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 备份/恢复功能将会以JSON文件实现</p><p class="text_s">备份: 备份完成后会自动下载备份文件，下载完成十秒后。服务器自动删除服务端备份数据</p><p class="text_s">恢复: 恢复文件的文件名必须为 【<span style="color:red;">backup.json</span>】</p></div><div class="mdui-divider"></div>',3),C={style:{"text-align":"center","margin-top":"15px","margin-bottom":"15px"}},R={style:{"margin-left":"20px","margin-right":"20px"}},L=(0,e.Uk)(" 操作面板： "),B=(0,e._)("option",null,"请选择面板",-1),T=["value"],P=(0,e._)("div",{class:"mdui-divider"},null,-1),F=(0,e._)("div",{class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},[(0,e._)("button",{"mdui-dialog":"{target: '#Restore'}",class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 恢复 ")],-1),E={class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},j={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},q=(0,e.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">错误日志</div><div class="mdui-card-primary-subtitle">Error Log</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 错误日志会显示以上功能执行时发生的错误记录（只显示最新的十条记录）</p></div>',2),H={class:"mdui-table-fluid"},N={class:"mdui-table mdui-table-hoverable"},W=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"发生时间"),(0,e._)("th",null,"任务名称"),(0,e._)("th",null,"错误记录")])],-1),K={id:"Restore",class:"mdui-dialog",style:{top:"210px",display:"none"}},z=(0,e._)("div",{class:"mdui-dialog-title"},"备份恢复",-1),G={class:"mdui-dialog-content mdui-typo",style:{height:"407px"}},J={class:"mdui-dialog-actions"},Q=(0,e._)("div",{id:"SendOK",class:"mdui-dialog",style:{display:"none"}},[(0,e._)("div",{class:"mdui-dialog-title"},"任务提示"),(0,e._)("div",{class:"mdui-dialog-content"},"操作已进入任务队列, 请稍后前往青龙面板查看结果"),(0,e._)("div",{class:"mdui-dialog-actions"},[(0,e._)("button",{class:"mdui-btn mdui-ripple","mdui-dialog-close":""},"确认")])],-1);function Y(i,t,a,s,n,d){return(0,e.wg)(),(0,e.iD)("div",c,[m,(0,e._)("div",u,[p,(0,e._)("div",g,[(0,e._)("span",v,[h,(0,e._)("select",{class:"mdui-select",onChange:t[0]||(t[0]=i=>d.UpdateServerID("A",i)),id:"server1"},[_,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.AllPanelData,(i=>((0,e.wg)(),(0,e.iD)("option",{key:i,value:i["PanelName"]},(0,r.zw)(i["PanelName"]),9,b)))),128))],32)]),(0,e._)("span",k,[w,(0,e._)("select",{class:"mdui-select",onChange:t[1]||(t[1]=i=>d.UpdateServerID("B",i)),id:"server2"},[f,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.AllPanelData,(i=>((0,e.wg)(),(0,e.iD)("option",{key:i,value:i["PanelName"]},(0,r.zw)(i["PanelName"]),9,y)))),128))],32)]),(0,e._)("span",x,[D,(0,e._)("select",{class:"mdui-select",onClick:t[2]||(t[2]=i=>d.UpdateData(i)),id:"function"},U)])]),(0,e._)("div",Z,[(0,e._)("button",{onClick:t[3]||(t[3]=(...i)=>d.SendData&&d.SendData(...i)),class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 执行任务 ")])]),(0,e._)("div",A,[O,(0,e._)("div",C,[(0,e._)("span",R,[L,(0,e._)("select",{class:"mdui-select",onChange:t[4]||(t[4]=i=>d.UpdateBRServerID(i)),id:"server3"},[B,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.AllPanelData,(i=>((0,e.wg)(),(0,e.iD)("option",{key:i,value:i["PanelName"]},(0,r.zw)(i["PanelName"]),9,T)))),128))],32)])]),P,F,(0,e._)("div",E,[(0,e._)("button",{onClick:t[5]||(t[5]=(...i)=>d.SendBackup&&d.SendBackup(...i)),class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 备份 ")])]),(0,e._)("div",j,[q,(0,e._)("div",H,[(0,e._)("table",N,[W,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(n.ErrorInfo,(i=>((0,e.wg)(),(0,e.iD)("tr",{key:i},[(0,e._)("th",null,(0,r.zw)(i.OccurrenceTime),1),(0,e._)("th",null,(0,r.zw)(i.Journal),1),(0,e._)("th",null,(0,r.zw)(i.Operation),1)])))),128))])])])]),(0,e._)("div",K,[z,(0,e._)("div",G,[(0,e._)("input",{type:"file",onChange:t[6]||(t[6]=(...i)=>d.UpdateFile&&d.UpdateFile(...i)),id:"backupFile",accept:"application/json"},null,32),(0,e._)("div",J,[(0,e._)("button",{onClick:t[7]||(t[7]=(...i)=>d.SendRestore&&d.SendRestore(...i)),class:"mdui-btn mdui-color-green-700 mdui-text-color-white btn","mdui-dialog-close":""}," 执行操作 ")])])]),Q])}var V=a(9669),M=a.n(V),X=a(4493),$=a(5823),ii=a.n($),ti={name:"AdminTransferCom",data(){return{AllPanelData:[{ID:0,PanelName:"",url:"",id:"",secret:"",envBinding:""}],ServerID:{IDOne:0,IDTwo:0},SendFunction:0,BRServerID:{IDOne:0},File:[],ErrorInfo:[{OccurrenceTime:"暂无数据",Journal:"暂无数据",Operation:"暂无数据"}]}},methods:{GetAllPanelData(){M().get("/v2/api/env/panel/all").then((i=>{this.AllPanelData=i.data.data})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))},UpdateServerID(i,t){let a=t.target.selectedIndex;0!==a&&("A"===i?this.ServerID.IDOne=this.AllPanelData[a-1].ID:this.ServerID.IDTwo=this.AllPanelData[a-1].ID)},UpdateData(i){this.SendFunction=i.target.selectedIndex},SendData(){if(this.ServerID.IDOne===this.ServerID.IDTwo)X.Z.snackbar({message:"必须保证A与B服务器不一致",position:"right-top"});else if(0===this.SendFunction){let i=new X.Z.Dialog("#SendOK");M().post("/v2/api/container/copy",this.ServerID).then((t=>{switch(""!==t.data){case 2e3===t.data.code:i.toggle();break;case 5022===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5003===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5002===t.data.code:""===t.data.data?X.Z.snackbar({message:"服务繁忙",position:"right-top"}):X.Z.snackbar({message:t.data.msg,position:"right-top"});break}})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))}else{let i=new X.Z.Dialog("#SendOK");M().post("/v2/api/container/transfer",this.ServerID).then((t=>{switch(""!==t.data){case 2e3===t.data.code:i.toggle();break;case 5022===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5003===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5002===t.data.code:""===t.data.data?X.Z.snackbar({message:"服务繁忙",position:"right-top"}):X.Z.snackbar({message:t.data.msg,position:"right-top"});break}})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))}},UpdateBRServerID(i){let t=i.target.selectedIndex;0!==t&&(this.BRServerID.IDOne=this.AllPanelData[t-1].ID)},SendBackup(){M().post("/v2/api/container/backup",this.BRServerID).then((i=>{switch(""!==i.data){case 2e3===i.data.code:M().post("/v2/api/container/backup/data").then((i=>{ii()(JSON.stringify(i.data),"backup.json")})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}));break;case 5022===i.data.code:X.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5003===i.data.code:X.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5002===i.data.code:""===i.data.data?X.Z.snackbar({message:"服务繁忙",position:"right-top"}):X.Z.snackbar({message:i.data.msg,position:"right-top"});break}})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))},UpdateFile(i){this.File=i.target.files[0]},SendRestore(){let i=new X.Z.Dialog("#SendOK"),t=new FormData;t.append("file",this.File),M().post("/v2/api/container/restore?sID="+this.BRServerID.IDOne.toString(),t).then((t=>{switch(""!==t.data){case 2e3===t.data.code:i.toggle();break;case 5023===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5022===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5003===t.data.code:X.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5002===t.data.code:""===t.data.data?X.Z.snackbar({message:"服务繁忙",position:"right-top"}):X.Z.snackbar({message:t.data.msg,position:"right-top"});break}})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))},GetErrorInfo(){M().get("/v2/api/container/info").then((i=>{switch(""!==i.data){case 2e3===i.data.code:""!==i.data.data&&null!==i.data.data&&(this.ErrorInfo=i.data.data)}})).catch((i=>{X.Z.snackbar({message:i,position:"right-top"})}))}},mounted(){this.GetAllPanelData(),this.GetErrorInfo()}},ai=a(3744);const ei=(0,ai.Z)(ti,[["render",Y]]);var si=ei,ni={name:"AdminTransferView",components:{AdminHeader:d.Z,AdminBar:o.Z,AdminFooter:l.Z,AdminTransferCom:si},mounted(){window.innerWidth>=1e3&&document.body.classList.add("mdui-drawer-body-left")}};const di=(0,ai.Z)(ni,[["render",n]]);var oi=di}}]);
//# sourceMappingURL=388.97f710e5.js.map