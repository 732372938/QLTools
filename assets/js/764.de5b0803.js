(self["webpackChunkqltools"]=self["webpackChunkqltools"]||[]).push([[764],{5823:function(t){t.exports=function(t,i,e,a){var s="undefined"!==typeof a?[a,t]:[t],n=new Blob(s,{type:e||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,i);else{var d=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=d,o.setAttribute("download",i),"undefined"===typeof o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(d)}),200)}}},8145:function(t,i,e){"use strict";e.d(i,{Z:function(){return B}});var a=e(6252);const s=t=>((0,a.dD)("data-v-89b82692"),t=t(),(0,a.Cn)(),t),n={class:"mdui-drawer mdui-shadow-6",id:"main-drawer",style:{"box-sizing":"border-box"}},d={class:"mdui-list"},o=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"desktop_mac",-1))),r=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"仪表盘",-1))),l=[o,r],c=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"playlist_play",-1))),m=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"变量管理",-1))),u=[c,m],p=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"apps",-1))),g=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"面板管理",-1))),h=[p,g],v=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"local_play",-1))),_=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"插件管理",-1))),b=[v,_],k=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"import_export",-1))),f=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"容器管理",-1))),w=[k,f],y=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"sms",-1))),x=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"推送管理",-1))),D=[y,x],I=s((()=>(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"settings",-1))),S=s((()=>(0,a._)("div",{class:"mdui-list-item-content"},"网站设置",-1))),U=[I,S],Z=s((()=>(0,a._)("a",{class:"mdui-list-item","mdui-drawer-close":""},[(0,a._)("i",{class:"mdui-list-item-icon mdui-icon material-icons"},"chevron_left"),(0,a._)("div",{class:"mdui-list-item-content"},"收起菜单")],-1)));function A(t,i,e,s,o,r){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",d,[(0,a._)("a",{onClick:i[0]||(i[0]=t=>this.OpenURL("/#/admin/")),class:"mdui-list-item"},l),(0,a._)("a",{onClick:i[1]||(i[1]=t=>this.OpenURL("/#/admin/env/")),class:"mdui-list-item"},u),(0,a._)("a",{onClick:i[2]||(i[2]=t=>this.OpenURL("/#/admin/panel/")),class:"mdui-list-item"},h),(0,a._)("a",{onClick:i[3]||(i[3]=t=>this.OpenURL("/#/admin/plugin/")),class:"mdui-list-item"},b),(0,a._)("a",{onClick:i[4]||(i[4]=t=>this.OpenURL("/#/admin/transfer/")),class:"mdui-list-item"},w),(0,a._)("a",{onClick:i[5]||(i[5]=t=>this.OpenURL("/#/admin/message/")),class:"mdui-list-item"},D),(0,a._)("a",{onClick:i[6]||(i[6]=t=>this.OpenURL("/#/admin/settings/")),class:"mdui-list-item"},U),Z])])}var O=e(4493),C={name:"AdminBar",methods:{changeStyle(){window.innerWidth>=1e3&&document.getElementById("main-drawer").classList.add("mdui-drawer-open");let t=document.querySelector("#container");t.style.minHeight=window.innerHeight-document.body.clientHeight+t.clientHeight+"px",O.Z.mutation()},OpenURL(t){window.open(t,"_self"),location.reload()}},mounted(){this.changeStyle()}},R=e(3744);const L=(0,R.Z)(C,[["render",A],["__scopeId","data-v-89b82692"]]);var B=L},3709:function(t,i,e){"use strict";e.d(i,{Z:function(){return C}});var a=e(6252);const s=t=>((0,a.dD)("data-v-52858f53"),t=t(),(0,a.Cn)(),t),n={class:"mdui-m-t-5"},d={class:"mdui-p-a-5 mdui-typo mdui-container"},o={class:"mdui-row-sm-3"},r={class:"mdui-col mdui-text"},l=s((()=>(0,a._)("span",{id:"Copyright"},"Copyright © 2022 All rights reserved. ",-1))),c={href:"https://github.com/nuanxinqing123/QLTools"},m=(0,a.Uk)("青龙 Tools"),u=s((()=>(0,a._)("p",null,"简单便捷的第三方工具，给您带来不一样的体验！",-1))),p={class:"mdui-col mdui-text"},g=(0,a.Uk)("邮件联系: "),h={href:"mailto:nuanxinqing@gmail.com"},v=(0,a.Uk)("nuanxinqing@gmail.com"),_=(0,a.Uk)("电报联系: "),b={href:"https://t.me/Nuanxinqing"},k=(0,a.Uk)("@Nuanxinqing"),f={class:"mdui-col mdui-text"},w=(0,a.Uk)("电报频道: "),y={href:"https://t.me/qltool"},x=(0,a.Uk)("青龙Tools"),D=(0,a.Uk)("电报群组: "),I={href:"https://t.me/qltools"},S=(0,a.Uk)("青龙Tools吹水群");function U(t,i,e,s,U,Z){const A=(0,a.up)("st");return(0,a.wg)(),(0,a.iD)("footer",n,[(0,a._)("div",d,[(0,a._)("div",o,[(0,a._)("div",r,[(0,a._)("p",null,[l,(0,a._)("a",c,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[m])),_:1})])]),u]),(0,a._)("div",p,[(0,a._)("p",null,[g,(0,a._)("a",h,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[v])),_:1})])]),(0,a._)("p",null,[_,(0,a._)("a",b,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[k])),_:1})])])]),(0,a._)("div",f,[(0,a._)("p",null,[w,(0,a._)("a",y,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[x])),_:1})])]),(0,a._)("p",null,[D,(0,a._)("a",I,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[S])),_:1})])])])])])])}var Z={name:"AdminFooter"},A=e(3744);const O=(0,A.Z)(Z,[["render",U],["__scopeId","data-v-52858f53"]]);var C=O},2743:function(t,i,e){"use strict";e.d(i,{Z:function(){return b}});var a=e(6252);const s={class:"mdui-appbar mdui-appbar-fixed mdui-color-indigo-800"},n={class:"mdui-toolbar"},d=(0,a._)("a",{"mdui-tooltip":"{content: '菜单'}","mdui-drawer":"{target: '#main-drawer'}",class:"mdui-btn mdui-btn-icon"},[(0,a._)("i",{class:"mdui-icon material-icons"},"menu")],-1),o=(0,a._)("a",{href:"javascript:;",class:"mdui-typo-headline"},"Tools",-1),r=(0,a._)("div",{class:"mdui-toolbar-spacer"},null,-1),l=(0,a._)("i",{class:"mdui-icon material-icons"},"home",-1),c=[l],m=(0,a._)("a",{"mdui-tooltip":"{content: '刷新页面'}",href:"javascript:location.reload();",class:"mdui-btn mdui-btn-icon"},[(0,a._)("i",{class:"mdui-icon material-icons"},"refresh")],-1),u=(0,a._)("i",{class:"mdui-icon material-icons"},"exit_to_app",-1),p=[u];function g(t,i,e,l,u,g){return(0,a.wg)(),(0,a.iD)("header",s,[(0,a._)("div",n,[d,o,r,(0,a._)("a",{"mdui-tooltip":"{content: '前往首页'}",onClick:i[0]||(i[0]=(...t)=>g.GoIndex&&g.GoIndex(...t)),class:"mdui-btn mdui-btn-icon"},c),m,(0,a._)("a",{"mdui-tooltip":"{content: '退出登录'}",onClick:i[1]||(i[1]=t=>this.LogOut()),href:"javascript:;",class:"mdui-btn mdui-btn-icon",id:"LogOut"},p)])])}var h={name:"AdminHeader",methods:{LogOut(){console.log("退出登录"),localStorage.clear(),window.open("/#/","_self"),location.reload()},GoIndex(){window.open("/#/","_self"),location.reload()}}},v=e(3744);const _=(0,v.Z)(h,[["render",g]]);var b=_},8764:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return it}});var a=e(6252);const s={class:"mdui-appbar-with-toolbar"};function n(t,i,e,n,d,o){const r=(0,a.up)("AdminHeader"),l=(0,a.up)("AdminBar"),c=(0,a.up)("AdminTransferCom"),m=(0,a.up)("AdminFooter");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(r),(0,a.Wm)(l),(0,a.Wm)(c),(0,a.Wm)(m)])}var d=e(2743),o=e(8145),r=e(3709),l=e(3577);const c={id:"container",class:"mdui-container mdui-p-t-1",style:{"margin-top":"10px"}},m=(0,a.uE)('<div class="mdui-card mt" style="border-radius:15px;"><div class="mdui-card-primary"><div class="mdui-card-primary-title">容器管理</div><div class="mdui-card-primary-subtitle">Container Management</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">容器管理是方便管理员对于不同容器之间变量的管理操作</p></div></div>',1),u={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},p=(0,a.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">迁移/复制</div><div class="mdui-card-primary-subtitle">Transfer Copy</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 迁移/复制功能需要至少添加两个面板地址才能正常使用</p><p class="text_s">迁移: 将A面板的所有变量迁移到B面板, 迁移完成后会清空A面板变量 <span style="color:red;">【迁移功能可能受到青龙的限流限制,强烈推荐使用备份功能先备份数据。然后再使用迁移功能（避免数据丢失）】</span></p><p class="text_s">复制: 将A面板的所有变量复制到B面板, 复制完成后A面板变量不会变化</p></div><div class="mdui-divider"></div>',3),g={style:{"text-align":"center","margin-top":"15px"}},h={style:{"margin-left":"20px","margin-right":"20px"}},v=(0,a.Uk)(" A面板："),_={style:{"margin-left":"20px","margin-right":"20px"}},b=(0,a.Uk)(" B面板："),k={style:{"margin-left":"20px","margin-right":"20px"}},f=(0,a.Uk)(" 操作："),w=(0,a._)("option",null,"复制",-1),y=(0,a._)("option",null,"迁移",-1),x=[w,y],D={class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},I={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},S=(0,a.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">备份/恢复</div><div class="mdui-card-primary-subtitle">Backup Restore</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 备份/恢复功能将会以JSON文件实现</p><p class="text_s">备份: 备份完成后会自动下载备份文件，下载完成十秒后。服务器自动删除服务端备份数据</p><p class="text_s">恢复: 恢复文件的文件名必须为 【<span style="color:red;">backup.json</span>】</p></div><div class="mdui-divider"></div>',3),U={style:{"text-align":"center","margin-top":"15px","margin-bottom":"15px"}},Z={style:{"margin-left":"20px","margin-right":"20px"}},A=(0,a.Uk)(" 操作面板："),O=(0,a._)("div",{class:"mdui-divider"},null,-1),C=(0,a._)("div",{class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},[(0,a._)("button",{"mdui-dialog":"{target: '#Restore'}",class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 恢复 ")],-1),R={class:"mdui-float-right",style:{"margin-right":"15px","margin-top":"15px","margin-bottom":"15px"}},L={class:"mdui-card mt",style:{"border-radius":"15px","margin-top":"15px"}},B=(0,a.uE)('<div class="mdui-card-primary"><div class="mdui-card-primary-title">错误日志</div><div class="mdui-card-primary-subtitle">Error Log</div></div><div class="mdui-card-content mdui-typo"><p class="text_s">Tip: 错误日志会显示以上功能执行时发生的错误记录（只显示最新的十条记录）</p></div>',2),T={class:"mdui-table-fluid"},E={class:"mdui-table mdui-table-hoverable"},F=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"发生时间"),(0,a._)("th",null,"任务名称"),(0,a._)("th",null,"错误记录")])],-1),H={id:"Restore",class:"mdui-dialog",style:{top:"210px",display:"none"}},W=(0,a._)("div",{class:"mdui-dialog-title"},"备份恢复",-1),j={class:"mdui-dialog-content mdui-typo",style:{height:"407px"}},q={class:"mdui-dialog-actions"},P=(0,a._)("div",{id:"SendOK",class:"mdui-dialog",style:{display:"none"}},[(0,a._)("div",{class:"mdui-dialog-title"},"任务提示"),(0,a._)("div",{class:"mdui-dialog-content"},"操作已进入任务队列, 请稍后前往青龙面板查看结果"),(0,a._)("div",{class:"mdui-dialog-actions"},[(0,a._)("button",{class:"mdui-btn mdui-ripple","mdui-dialog-close":""},"确认")])],-1);function G(t,i,e,s,n,d){return(0,a.wg)(),(0,a.iD)("div",c,[m,(0,a._)("div",u,[p,(0,a._)("div",g,[(0,a._)("span",h,[v,(0,a._)("select",{class:"mdui-select",onChange:i[0]||(i[0]=t=>d.UpdateServerID("A",t)),id:"server1"},null,32)]),(0,a._)("span",_,[b,(0,a._)("select",{class:"mdui-select",onChange:i[1]||(i[1]=t=>d.UpdateServerID("B",t)),id:"server2"},null,32)]),(0,a._)("span",k,[f,(0,a._)("select",{"mdui-select":"{position: 'top'}",onClick:i[2]||(i[2]=t=>d.UpdateData(t)),id:"function"},x)])]),(0,a._)("div",D,[(0,a._)("button",{onClick:i[3]||(i[3]=(...t)=>d.SendData&&d.SendData(...t)),class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 执行任务 ")])]),(0,a._)("div",I,[S,(0,a._)("div",U,[(0,a._)("span",Z,[A,(0,a._)("select",{class:"mdui-select",onChange:i[4]||(i[4]=t=>d.UpdateBRServerID(t)),id:"server3"},null,32)])]),O,C,(0,a._)("div",R,[(0,a._)("button",{onClick:i[5]||(i[5]=(...t)=>d.SendBackup&&d.SendBackup(...t)),class:"mdui-btn mdui-btn-dense mdui-btn-raised btn mdui-p-x-1 mdui-color-green-700 mdui-text-color-white"}," 备份 ")])]),(0,a._)("div",L,[B,(0,a._)("div",T,[(0,a._)("table",E,[F,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.ErrorInfo,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("th",null,(0,l.zw)(t.OccurrenceTime),1),(0,a._)("th",null,(0,l.zw)(t.Journal),1),(0,a._)("th",null,(0,l.zw)(t.Operation),1)])))),128))])])])]),(0,a._)("div",H,[W,(0,a._)("div",j,[(0,a._)("input",{type:"file",onChange:i[6]||(i[6]=(...t)=>d.UpdateFile&&d.UpdateFile(...t)),id:"backupFile",accept:"application/json"},null,32),(0,a._)("div",q,[(0,a._)("button",{onClick:i[7]||(i[7]=(...t)=>d.SendRestore&&d.SendRestore(...t)),class:"mdui-btn mdui-color-green-700 mdui-text-color-white btn","mdui-dialog-close":""}," 执行操作 ")])])]),P])}var K=e(9669),z=e.n(K),J=e(4493),M=e(5823),N=e.n(M),Q={name:"AdminTransferCom",data(){return{AllPanelData:[{ID:0,name:"",url:"",id:"",secret:"",envBinding:""}],ServerID:{IDOne:0,IDTwo:0},SendFunction:0,BRServerID:{IDOne:0},File:[],ErrorInfo:[{OccurrenceTime:"暂无数据",Journal:"暂无数据",Operation:"暂无数据"}]}},methods:{GetAllPanelData(){z().get("/v2/api/env/panel/all").then((t=>{this.AllPanelData=t.data.data;let i=new J.Z.Select("#server1",{position:"top"}),e=new J.Z.Select("#server2",{position:"top"}),a=new J.Z.Select("#server3",{position:"top"}),s="";for(let n=0;n<this.AllPanelData.length;n++)s=s+"<option>"+this.AllPanelData[n].name+"</option>";document.getElementById("server1").innerHTML=s,document.getElementById("server2").innerHTML=s,document.getElementById("server3").innerHTML=s,i.handleUpdate(),e.handleUpdate(),a.handleUpdate()})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))},UpdateServerID(t,i){let e=i.target.selectedIndex;0!==e&&("A"===t?this.ServerID.IDOne=this.AllPanelData[e-1].ID:this.ServerID.IDTwo=this.AllPanelData[e-1].ID)},UpdateData(t){this.SendFunction=t.target.selectedIndex},SendData(){if(this.ServerID.IDOne===this.ServerID.IDTwo)J.Z.snackbar({message:"必须保证A与B服务器不一致",position:"right-top"});else if(0===this.SendFunction){let t=new J.Z.Dialog("#SendOK");z().post("/v2/api/container/copy",this.ServerID).then((i=>{switch(""!==i.data){case 2e3===i.data.code:t.toggle();break;case 5022===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5003===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5002===i.data.code:""===i.data.data?J.Z.snackbar({message:"服务繁忙",position:"right-top"}):J.Z.snackbar({message:i.data.msg,position:"right-top"});break}})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))}else{let t=new J.Z.Dialog("#SendOK");z().post("/v2/api/container/transfer",this.ServerID).then((i=>{switch(""!==i.data){case 2e3===i.data.code:t.toggle();break;case 5022===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5003===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5002===i.data.code:""===i.data.data?J.Z.snackbar({message:"服务繁忙",position:"right-top"}):J.Z.snackbar({message:i.data.msg,position:"right-top"});break}})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))}},UpdateBRServerID(t){let i=t.target.selectedIndex;0!==i&&(this.BRServerID.IDOne=this.AllPanelData[i-1].ID)},SendBackup(){z().post("/v2/api/container/backup",this.BRServerID).then((t=>{switch(""!==t.data){case 2e3===t.data.code:z().post("/v2/api/container/backup/data").then((t=>{console.log(t.data),N()(JSON.stringify(t.data),"backup.json")})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}));break;case 5022===t.data.code:J.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5003===t.data.code:J.Z.snackbar({message:t.data.msg,position:"right-top"});break;case 5002===t.data.code:""===t.data.data?J.Z.snackbar({message:"服务繁忙",position:"right-top"}):J.Z.snackbar({message:t.data.msg,position:"right-top"});break}})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))},UpdateFile(t){this.File=t.target.files[0]},SendRestore(){let t=new J.Z.Dialog("#SendOK"),i=new FormData;i.append("file",this.File),z().post("/v2/api/container/restore?sID="+this.BRServerID.IDOne.toString(),i).then((i=>{switch(""!==i.data){case 2e3===i.data.code:t.toggle();break;case 5023===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5022===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5003===i.data.code:J.Z.snackbar({message:i.data.msg,position:"right-top"});break;case 5002===i.data.code:""===i.data.data?J.Z.snackbar({message:"服务繁忙",position:"right-top"}):J.Z.snackbar({message:i.data.msg,position:"right-top"});break}})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))},GetErrorInfo(){z().get("/v2/api/container/info").then((t=>{switch(""!==t.data){case 2e3===t.data.code:""!==t.data.data&&null!==t.data.data&&(this.ErrorInfo=t.data.data)}})).catch((t=>{J.Z.snackbar({message:t,position:"right-top"})}))}},mounted(){this.GetAllPanelData(),this.GetErrorInfo()}},V=e(3744);const Y=(0,V.Z)(Q,[["render",G]]);var X=Y,$={name:"AdminTransferView",components:{AdminHeader:d.Z,AdminBar:o.Z,AdminFooter:r.Z,AdminTransferCom:X},mounted(){window.innerWidth>=1e3&&document.body.classList.add("mdui-drawer-body-left")}};const tt=(0,V.Z)($,[["render",n]]);var it=tt}}]);
//# sourceMappingURL=764.de5b0803.js.map